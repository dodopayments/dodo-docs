---
title: "Checkout Sessions"
description: "Create secure, hosted checkout experiences that handle the complete payment flow for both one-time purchases and subscriptions with full customization control."
icon: "cart-shopping"
tag: "New"
---

<CardGroup cols={2}>
<Card title="Quick Start Guide" icon="rocket" href="#creating-your-first-checkout-session">
  Get your first checkout session running in under 5 minutes
</Card>

<Card title="API Reference & Live Testing" icon="code" href="/api-reference/checkout-sessions/create">
  Explore the full API documentation and interactively test Checkout Session requests and responses.
</Card>
</CardGroup>

<Info>
**Session Validity**: Checkout sessions are valid for 24 hours by default. If you pass `confirm=true` in your request, the session will only be valid for 15 minutes.
</Info>


## Prerequisites

<Steps>
<Step title="Dodo Payments Account">
  You'll need an active Dodo Payments merchant account with API access.
</Step>

<Step title="API Credentials">
  Generate your API credentials from the Dodo Payments dashboard:
</Step>

<Step title="Products Setup">
  Create your products in the Dodo Payments dashboard before implementing checkout sessions.
</Step>
</Steps>

## Creating Your First Checkout Session


<Tabs>
<Tab title="Node.js SDK">
```javascript expandable
import DodoPayments from 'dodopayments';

// Initialize the Dodo Payments client
const client = new DodoPayments({
  bearerToken: process.env.DODO_PAYMENTS_API_KEY,
});

async function createCheckoutSession() {
  try {
    const session = await client.checkoutSessions.create({
      // Products to sell - use IDs from your Dodo Payments dashboard
      product_cart: [
        {
          product_id: 'prod_123', // Replace with your actual product ID
          quantity: 1
        }
      ],
      
      // Pre-fill customer information to reduce friction
      customer: {
        email: 'customer@example.com',
        name: 'John Doe',
        phone_number: '+1234567890'
      },
      
      // Billing address for tax calculation and compliance
      billing_address: {
        street: '123 Main St',
        city: 'San Francisco',
        state: 'CA',
        country: 'US', // Required: ISO 3166-1 alpha-2 country code
        zipcode: '94102'
      },
      
      // Where to redirect after successful payment
      return_url: 'https://yoursite.com/checkout/success',
      
      // Custom data for your internal tracking
      metadata: {
        order_id: 'order_123',
        source: 'web_app'
      }
    });

    // Redirect your customer to this URL to complete payment
    console.log('Checkout URL:', session.checkout_url);
    console.log('Session ID:', session.session_id);
    
    return session;
    
  } catch (error) {
    console.error('Failed to create checkout session:', error);
    throw error;
  }
}

// Example usage in an Express.js route
app.post('/create-checkout', async (req, res) => {
  try {
    const session = await createCheckoutSession();
    res.json({ checkout_url: session.checkout_url });
  } catch (error) {
    res.status(500).json({ error: 'Failed to create checkout session' });
  }
});
```
</Tab>

<Tab title="Python SDK">
```python expandable
import os
from dodopayments import DodoPayments

# Initialize the Dodo Payments client
client = DodoPayments(
    bearer_token=os.environ.get("DODO_PAYMENTS_API_KEY"),
)

def create_checkout_session():
    """
    Create a checkout session for a single product with customer data pre-filled.
    Returns the session object containing checkout_url for customer redirection.
    """
    try:
        session = client.checkout_sessions.create(
            # Products to sell - use IDs from your Dodo Payments dashboard
            product_cart=[
                {
                    "product_id": "prod_123",  # Replace with your actual product ID
                    "quantity": 1
                }
            ],
            
            # Pre-fill customer information to reduce checkout friction
            customer={
                "email": "customer@example.com",
                "name": "John Doe",
                "phone_number": "+1234567890"
            },
            
            # Billing address for tax calculation and compliance
            billing_address={
                "street": "123 Main St",
                "city": "San Francisco", 
                "state": "CA",
                "country": "US",  # Required: ISO 3166-1 alpha-2 country code
                "zipcode": "94102"
            },
            
            # Where to redirect after successful payment
            return_url="https://yoursite.com/checkout/success",
            
            # Custom data for your internal tracking
            metadata={
                "order_id": "order_123",
                "source": "web_app"
            }
        )
        
        # Redirect your customer to this URL to complete payment
        print(f"Checkout URL: {session.checkout_url}")
        print(f"Session ID: {session.session_id}")
        
        return session
        
    except Exception as error:
        print(f"Failed to create checkout session: {error}")
        raise error

# Example usage in a Flask route
from flask import Flask, jsonify, request

app = Flask(__name__)

@app.route('/create-checkout', methods=['POST'])
def create_checkout():
    try:
        session = create_checkout_session()
        return jsonify({"checkout_url": session.checkout_url})
    except Exception as error:
        return jsonify({"error": "Failed to create checkout session"}), 500
```
</Tab>


<Tab title="REST API">
```javascript expandable
// Direct API call using fetch - useful for any JavaScript environment
async function createCheckoutSession() {
  try {
    const response = await fetch('https://test.dodopayments.com/checkouts', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': `Bearer ${process.env.DODO_PAYMENTS_API_KEY}`
      },
      body: JSON.stringify({
        // Products to sell - use IDs from your Dodo Payments dashboard
        product_cart: [
          {
            product_id: 'prod_123', // Replace with your actual product ID
            quantity: 1
          }
        ],
        
        // Pre-fill customer information to reduce checkout friction
        customer: {
          email: 'customer@example.com',
          name: 'John Doe',
          phone_number: '+1234567890'
        },
        
        // Billing address for tax calculation and compliance
        billing_address: {
          street: '123 Main St',
          city: 'San Francisco',
          state: 'CA', 
          country: 'US', // Required: ISO 3166-1 alpha-2 country code
          zipcode: '94102'
        },
        
        // Where to redirect after successful payment
        return_url: 'https://yoursite.com/checkout/success',
        
        // Custom data for your internal tracking
        metadata: {
          order_id: 'order_123',
          source: 'web_app'
        }
      })
    });

    if (!response.ok) {
      throw new Error(`HTTP error! status: ${response.status}`);
    }

    const session = await response.json();
    
    // Redirect your customer to this URL to complete payment
    console.log('Checkout URL:', session.checkout_url);
    console.log('Session ID:', session.session_id);
    
    return session;
    
  } catch (error) {
    console.error('Failed to create checkout session:', error);
    throw error;
  }
}

// Example: Redirect user to checkout
createCheckoutSession().then(session => {
  window.location.href = session.checkout_url;
});
```
</Tab>
</Tabs>

### API Response

All methods above return the same response structure:

```json
{
  "session_id": "cks_Gi6KGJ2zFJo9rq9Ukifwa",
  "checkout_url": "https://test.checkout.dodopayments.com/session/cks_Gi6KGJ2zFJo9rq9Ukifwa"
}
```

<Steps>
<Step title="Get the checkout URL">
Extract the `checkout_url` from the API response.
</Step>

<Step title="Redirect your customer">
Direct your customer to the checkout URL to complete their purchase.

```javascript
// Redirect immediately
window.location.href = session.checkout_url;

// Or open in new window
window.open(session.checkout_url, '_blank');
```
</Step>

<Step title="Handle the return">
After payment, customers are redirected to your `return_url` with additional query parameters for payment status.
</Step>
</Steps>

## Request Body

<CardGroup cols={2}>
<Card title="Required Fields" icon="asterisk">
  Essential fields needed for every checkout session
</Card>

<Card title="Optional Fields" icon="gear">
  Additional configuration to customize your checkout experience
</Card>
</CardGroup>

### Required Fields

<ParamField body="product_cart" type="array" required>
Array of products to include in the checkout session. Each product must have a valid `product_id` from your Dodo Payments dashboard.

<Warning>
**Important**: Multiple product carts can only contain one-time payment products. You cannot mix subscription products with one-time products in the same checkout session.
</Warning>

<Expandable title="Product Cart Item Properties">
<ParamField body="product_id" type="string" required>
The unique identifier of the product from your Dodo Payments dashboard.

**Example:** `"prod_123abc456def"`
</ParamField>

<ParamField body="quantity" type="integer" required>
Quantity of the product. Must be greater than 0.

**Example:** `1` for single item, `3` for multiple quantities
</ParamField>
</Expandable>
</ParamField>

<Tip>
**Find Your Product IDs**: You can find product IDs in your Dodo Payments dashboard under Products â†’ View Details, or by using the [List Products API](/api-reference/products/get-products).
</Tip>

### Optional Fields

Configure these fields to customize the checkout experience and add business logic to your payment flow.

<AccordionGroup>
<Accordion title="Customer Information">

<ParamField body="customer" type="object">
Pre-fill customer details to reduce checkout friction and improve conversion rates.

<Expandable title="Customer object properties">
<ParamField body="email" type="string">
Customer's email address. Used for receipts, order confirmations, and customer identification.

**Best Practice**: Always include email when available to ensure customers receive payment confirmations.
</ParamField>

<ParamField body="name" type="string">
Customer's full name as it should appear on receipts and invoices.

**Example**: `"John Doe"` or `"Jane Smith"`
</ParamField>

<ParamField body="phone_number" type="string">
Customer's phone number in international format. Required for some payment methods and fraud prevention.

**Format**: Include country code, e.g., `"+1234567890"` for US numbers
</ParamField>
</Expandable>
</ParamField>

<ParamField body="billing_address" type="object">
Billing address information for accurate tax calculation, fraud prevention, and regulatory compliance.

<Info>
When `confirm` is set to `true`, all billing address fields become required for successful session creation.
</Info>

<Expandable title="Billing address object properties">
<ParamField body="street" type="string">
Complete street address including house number, street name, and apartment/unit number if applicable.

**Example**: `"123 Main St, Apt 4B"` or `"456 Oak Avenue"`
</ParamField>

<ParamField body="city" type="string">
City or municipality name.

**Example**: `"San Francisco"`, `"New York"`, `"London"`
</ParamField>

<ParamField body="state" type="string">
State, province, or region name. Use full names or standard abbreviations.

**Example**: `"California"` or `"CA"`, `"Ontario"` or `"ON"`
</ParamField>

<ParamField body="country" type="string" required>
Two-letter ISO country code (ISO 3166-1 alpha-2). This field is always required when billing_address is provided.

**Examples**: `"US"` (United States), `"CA"` (Canada), `"GB"` (United Kingdom), `"DE"` (Germany)

<Card title="Country Code Reference" icon="globe" href="/developer-resources/supported-countries">
  View complete list of supported countries and their ISO codes
</Card>
</ParamField>

<ParamField body="zipcode" type="string">
Postal code, ZIP code, or equivalent based on country requirements.

**Examples**: `"94102"` (US), `"M5V 3A8"` (Canada), `"SW1A 1AA"` (UK)
</ParamField>
</Expandable>
</ParamField>

</Accordion>

<Accordion title="Payment Configuration">

<ParamField body="allowed_payment_method_types" type="array">
Control which payment methods are available to customers during checkout. This helps optimize for specific markets or business requirements.

**Available Options**: `credit`, `debit`, `upi_collect`, `upi_intent`, `apple_pay`, `google_pay`, `amazon_pay`, `klarna`, `affirm`, `afterpay_clearpay`, `sepa`, `ach`

<Warning>
**Critical**: Always include `credit` and `debit` as fallback options to prevent checkout failures when preferred payment methods are unavailable.
</Warning>

**Example**: 
```json expandable
["apple_pay", "google_pay", "credit", "debit"]
```
</ParamField>

<ParamField body="billing_currency" type="string">
Override the default currency selection with a fixed billing currency. Uses ISO 4217 currency codes.

**Supported Currencies**: `USD`, `EUR`, `GBP`, `CAD`, `AUD`, `INR`, and more

**Example**: `"USD"` for US Dollars, `"EUR"` for Euros

<Note>
This field is only effective when adaptive pricing is enabled. If adaptive pricing is disabled, the product's default currency will be used.
</Note>
</ParamField>

<ParamField body="show_saved_payment_methods" type="boolean" default="false">
Display previously saved payment methods for returning customers, improving checkout speed and user experience.

</ParamField>

</Accordion>

<Accordion title="Session Management">

<ParamField body="return_url" type="string">
URL to redirect customers after successful payment or cancellation.
</ParamField>

<ParamField body="confirm" type="boolean" default="false">
If true, finalizes all session details immediately. API will throw an error if required data is missing.
</ParamField>

<ParamField body="discount_code" type="string">
Apply a discount code to the checkout session.
</ParamField>

<ParamField body="metadata" type="object">
Custom key-value pairs to store additional information about the session.
</ParamField>

</Accordion>

<Accordion title="UI Customization & Features">

<ParamField body="customization" type="object">
Customize the appearance and behavior of the checkout interface.

<Expandable title="Customization object properties">
<ParamField body="theme" type="string" default="system">
Theme for the checkout interface. Options: `light`, `dark`, or `system`.
</ParamField>

<ParamField body="show_order_details" type="boolean" default="true">
Display order details section in the checkout interface.
</ParamField>

<ParamField body="show_on_demand_tag" type="boolean" default="true">
Show the "on-demand" tag for applicable products.
</ParamField>
</Expandable>
</ParamField>

<ParamField body="feature_flags" type="object">
Configure specific features and behaviors for the checkout session.

<Expandable title="Feature flags object properties">
<ParamField body="allow_currency_selection" type="boolean" default="false">
Allow customers to select their preferred currency during checkout.
</ParamField>

<ParamField body="allow_discount_code" type="boolean" default="true">
Show discount code input field in the checkout interface.
</ParamField>

<ParamField body="allow_phone_number_collection" type="boolean" default="true">
Collect customer phone numbers during checkout.
</ParamField>

<ParamField body="allow_tax_id" type="boolean" default="false">
Allow customers to enter tax identification numbers.
</ParamField>

<ParamField body="always_create_new_customer" type="boolean" default="false">
Force creation of a new customer record instead of updating existing ones.
</ParamField>
</Expandable>
</ParamField>

</Accordion>

<Accordion title="Subscription Configuration">

<ParamField body="subscription_data" type="object">
Additional configuration for checkout sessions containing subscription products.

<Expandable title="Subscription data object properties">
<ParamField body="trial_period_days" type="integer">
Number of days for the trial period before the first charge.
</ParamField>
</Expandable>
</ParamField>

</Accordion>
</AccordionGroup>

## Usage Examples

Here are 10 comprehensive examples showcasing different checkout session configurations for various business scenarios:

### 1. Simple Single Product Checkout

```javascript expandable
const session = await client.checkoutSessions.create({
  product_cart: [
    {
      product_id: 'prod_ebook_guide',
      quantity: 1
    }
  ],
  customer: {
    email: 'customer@example.com'
  },
  return_url: 'https://yoursite.com/success'
});
```

### 2. Multi-Product Cart

```javascript expandable
const session = await client.checkoutSessions.create({
  product_cart: [
    {
      product_id: 'prod_laptop',
      quantity: 1
    },
    {
      product_id: 'prod_mouse',
      quantity: 2
    },
    {
      product_id: 'prod_warranty',
      quantity: 1
    }
  ],
  customer: {
    email: 'customer@example.com',
    name: 'John Doe',
    phone_number: '+1234567890'
  },
  billing_address: {
    street: '123 Tech Street',
    city: 'San Francisco',
    state: 'CA',
    country: 'US',
    zipcode: '94102'
  },
  return_url: 'https://electronics-store.com/order-confirmation'
});
```

### 3. Subscription with Trial Period

```javascript expandable
const session = await client.checkoutSessions.create({
  product_cart: [
    {
      product_id: 'prod_monthly_plan',
      quantity: 1
    }
  ],
  subscription_data: {
    trial_period_days: 14
  },
  customer: {
    email: 'user@startup.com',
    name: 'Jane Smith'
  },
  return_url: 'https://saas-app.com/onboarding',
  metadata: {
    plan_type: 'professional',
    referral_source: 'google_ads'
  }
});
```

### 4. Pre-confirmed Checkout

<Note>
When `confirm` is set to `true`, the customer will be taken directly to the checkout page, bypassing any confirmation steps.
</Note>

```javascript expandable
const session = await client.checkoutSessions.create({
  product_cart: [
    {
      product_id: 'prod_premium_course',
      quantity: 1
    }
  ],
  customer: {
    email: 'student@university.edu',
    name: 'Alex Johnson',
    phone_number: '+1555123456'
  },
  billing_address: {
    street: '456 University Ave',
    city: 'Boston',
    state: 'MA',
    country: 'US',
    zipcode: '02134'
  },
  confirm: true,
  return_url: 'https://learning-platform.com/course-access',
  metadata: {
    course_category: 'programming',
    enrollment_date: '2024-01-15'
  }
});
```



### 5. Checkout with Currency Override

<Note>
The `billing_currency` override only takes effect when adaptive currency is enabled in your account settings. If adaptive currency is disabled, this parameter will have no effect.
</Note>

```javascript expandable
const session = await client.checkoutSessions.create({
  product_cart: [
    {
      product_id: 'prod_consulting_service',
      quantity: 1
    }
  ],
  customer: {
    email: 'client@company.co.uk',
    name: 'Oliver Williams'
  },
  billing_address: {
    street: '789 Business Park',
    city: 'London',
    state: 'England',
    country: 'GB',
    zipcode: 'SW1A 1AA'
  },
  billing_currency: 'GBP',
  feature_flags: {
    allow_currency_selection: true,
    allow_tax_id: true
  },
  return_url: 'https://consulting-firm.com/service-confirmation'
});
```


### 6. Saved Payment Methods for Returning Customers

```javascript expandable
const session = await client.checkoutSessions.create({
  product_cart: [
    {
      product_id: 'prod_monthly_subscription',
      quantity: 1
    }
  ],
  customer: {
    email: 'returning.customer@example.com',
    name: 'Robert Johnson',
    phone_number: '+1555987654'
  },
  show_saved_payment_methods: true,
  feature_flags: {
    allow_phone_number_collection: true,
    always_create_new_customer: false
  },
  return_url: 'https://subscription-service.com/welcome-back',
  metadata: {
    customer_tier: 'premium',
    account_age: 'returning'
  }
});
```
### 7. B2B Checkout with Tax ID Collection

```javascript expandable
const session = await client.checkoutSessions.create({
  product_cart: [
    {
      product_id: 'prod_enterprise_license',
      quantity: 5
    }
  ],
  customer: {
    email: 'procurement@enterprise.com',
    name: 'Sarah Davis',
    phone_number: '+1800555000'
  },
  billing_address: {
    street: '1000 Corporate Blvd',
    city: 'New York',
    state: 'NY',
    country: 'US',
    zipcode: '10001'
  },
  feature_flags: {
    allow_tax_id: true,
    allow_phone_number_collection: true,
    always_create_new_customer: false
  },
  return_url: 'https://enterprise-software.com/license-delivery',
  metadata: {
    customer_type: 'enterprise',
    contract_id: 'ENT-2024-001',
    sales_rep: 'john.sales@company.com'
  }
});
```

### 8. Dark Theme Checkout with Discount Code

```javascript expandable
const session = await client.checkoutSessions.create({
  product_cart: [
    {
      product_id: 'prod_gaming_chair',
      quantity: 1
    }
  ],
  discount_code: 'BLACKFRIDAY2024',
  customization: {
    theme: 'dark',
    show_order_details: true,
    show_on_demand_tag: false
  },
  feature_flags: {
    allow_discount_code: true
  },
  customer: {
    email: 'gamer@example.com',
    name: 'Mike Chen'
  },
  return_url: 'https://gaming-store.com/order-complete'
});
```

### 9. Regional Payment Methods (UPI for India)

```javascript expandable
const session = await client.checkoutSessions.create({
  product_cart: [
    {
      product_id: 'prod_online_course_hindi',
      quantity: 1
    }
  ],
  allowed_payment_method_types: [
    'upi_collect',
    'upi_intent',
    'credit',
    'debit'
  ],
  customer: {
    email: 'student@example.in',
    name: 'Priya Sharma',
    phone_number: '+919876543210'
  },
  billing_address: {
    street: 'MG Road',
    city: 'Bangalore',
    state: 'Karnataka',
    country: 'IN',
    zipcode: '560001'
  },
  billing_currency: 'INR',
  return_url: 'https://education-platform.in/course-access',
  metadata: {
    region: 'south_india',
    language: 'hindi'
  }
});
```

### 10. BNPL (Buy Now Pay Later) Checkout

```javascript expandable
const session = await client.checkoutSessions.create({
  product_cart: [
    {
      product_id: 'prod_luxury_watch',
      quantity: 1
    }
  ],
  allowed_payment_method_types: [
    'klarna',
    'affirm',
    'afterpay_clearpay',
    'credit',
    'debit'
  ],
  customer: {
    email: 'fashion.lover@example.com',
    name: 'Emma Thompson',
    phone_number: '+1234567890'
  },
  billing_address: {
    street: '555 Fashion Ave',
    city: 'Los Angeles',
    state: 'CA',
    country: 'US',
    zipcode: '90210'
  },
  feature_flags: {
    allow_phone_number_collection: true
  },
  return_url: 'https://luxury-store.com/purchase-confirmation',
  metadata: {
    product_category: 'luxury',
    price_range: 'high_value'
  }
});
```

## Moving from Dynamic Links to Checkout Sessions

### Key Differences
Previously, when creating a payment link with Dynamic Links, you were required to provide the customer's complete billing address.

With Checkout Sessions, this is no longer necessary. You can simply pass along whatever information you have, and we'll handle the rest. For example:

- If you only know the customer's billing country, just provide that.
- The checkout flow will automatically collect the missing details before moving the customer to the payment page.
- On the other hand, if you already have all the required information and want to skip directly to the payment page, you can pass the full data set and include `confirm=true` in your request body.

### Migration Process

Migrating from Dynamic Links to Checkout Sessions is straightforward:

<Steps>
<Step title="Update your integration">
Update your integration to use the new API or SDK method.
</Step>

<Step title="Adjust request payload">
Adjust the request payload according to the Checkout Sessions format.
</Step>

<Step title="That's it!">
Yes. No additional handling or special migration steps are needed on your side.
</Step>
</Steps>




